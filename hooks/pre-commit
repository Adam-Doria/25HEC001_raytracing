#!/bin/bash
# Git pre-commit hook pour formater automatiquement le code avec clang-format

echo "üé® Formatage du code avec clang-format..."


files=$(git diff --cached --name-only --diff-filter=ACM | grep -E '\.(cpp|hpp|h)$')

if [ -z "$files" ]; then
    echo "‚úÖ Aucun fichier C++ √† formater"
    exit 0
fi


if ! command -v clang-format &> /dev/null; then
    echo "‚ùå Erreur: clang-format n'est pas install√©"
    echo "Installation: sudo apt install clang-format"
    exit 1
fi


for file in $files; do
    if [ -f "$file" ]; then
        echo "  Formatage: $file"
        clang-format -i "$file"
        git add "$file" 
    fi
done

echo "‚úÖ Code format√© avec succ√®s!"
exit 0
